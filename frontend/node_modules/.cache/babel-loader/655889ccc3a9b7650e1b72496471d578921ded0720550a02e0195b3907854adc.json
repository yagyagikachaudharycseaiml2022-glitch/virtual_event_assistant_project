{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AIAssistant(_ref){let{onNavigate}=_ref;const[text,setText]=useState('');const[listening,setListening]=useState(false);const[history,setHistory]=useState([]);let recognition=null;if(typeof window!=='undefined'&&('webkitSpeechRecognition'in window||'SpeechRecognition'in window)){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;recognition=new SpeechRecognition();recognition.lang='en-IN';recognition.interimResults=false;recognition.maxAlternatives=1;}function startListening(){if(!recognition)return alert('Speech recognition not supported (use Chrome).');setListening(true);recognition.start();recognition.onresult=e=>{const t=e.results[0][0].transcript;setText(t);handleSend(t);};recognition.onerror=e=>{console.error(e);setListening(false);};recognition.onend=()=>setListening(false);}async function handleSend(overrideText){const q=overrideText!==null&&overrideText!==void 0?overrideText:text;if(!q)return;setHistory(h=>[...h,{who:'user',text:q}]);setText('');try{const res=await onNavigate(q);const answer=res&&res.path?\"Route: \".concat(res.path.map(p=>p.label||p.id).join(' â†’ ')):'No path found.';setHistory(h=>[...h,{who:'assistant',text:answer}]);}catch(e){setHistory(h=>{var _e$response,_e$response$data;return[...h,{who:'assistant',text:'Error: '+((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.detail)||e.message)}];});}}return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-3 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{value:text,onChange:e=>setText(e.target.value),placeholder:\"Say: I'm at Gate 3, take me to Hall 5\",className:\"flex-1 border border-slate-200 rounded-md px-3 py-2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>startListening(),className:\"px-4 py-2 rounded-md \".concat(listening?'bg-rose-500 text-white':'bg-amber-400 text-white'),children:\"\\uD83C\\uDFA4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSend(),className:\"px-4 py-2 bg-sky-600 text-white rounded-md\",children:\"Navigate\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 space-y-1 max-h-36 overflow-auto\",children:history.slice().reverse().map((m,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"text-sm \".concat(m.who==='user'?'text-right':'text-left'),children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-block px-3 py-1 rounded \".concat(m.who==='user'?'bg-indigo-100 text-indigo-900':'bg-slate-100 text-slate-800'),children:m.text})},i))})]})});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","AIAssistant","_ref","onNavigate","text","setText","listening","setListening","history","setHistory","recognition","window","SpeechRecognition","webkitSpeechRecognition","lang","interimResults","maxAlternatives","startListening","alert","start","onresult","e","t","results","transcript","handleSend","onerror","console","error","onend","overrideText","q","h","who","res","answer","path","concat","map","p","label","id","join","_e$response","_e$response$data","response","data","detail","message","className","children","value","onChange","target","placeholder","onClick","slice","reverse","m","i"],"sources":["D:/7th SEM PROEJCT/virtual_event_assistant_project/virtual_event_assistant_project/frontend/src/components/AIAssistant.js"],"sourcesContent":["import React, { useState } from 'react';\n\nexport default function AIAssistant({ onNavigate }){\n  const [text, setText] = useState('');\n  const [listening, setListening] = useState(false);\n  const [history, setHistory] = useState([]);\n\n  let recognition = null;\n  if(typeof window !== 'undefined' && ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window)){\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    recognition = new SpeechRecognition();\n    recognition.lang = 'en-IN';\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n  }\n\n  function startListening(){\n    if(!recognition) return alert('Speech recognition not supported (use Chrome).');\n    setListening(true);\n    recognition.start();\n    recognition.onresult = (e) => {\n      const t = e.results[0][0].transcript;\n      setText(t);\n      handleSend(t);\n    };\n    recognition.onerror = (e) => { console.error(e); setListening(false); };\n    recognition.onend = () => setListening(false);\n  }\n\n  async function handleSend(overrideText){\n    const q = overrideText ?? text;\n    if(!q) return;\n    setHistory(h => [...h, { who: 'user', text: q }]);\n    setText('');\n    try{\n      const res = await onNavigate(q);\n      const answer = (res && res.path) ? `Route: ${res.path.map(p=>p.label||p.id).join(' â†’ ')}` : 'No path found.';\n      setHistory(h => [...h, { who: 'assistant', text: answer }]);\n    }catch(e){\n      setHistory(h => [...h, { who: 'assistant', text: 'Error: ' + (e?.response?.data?.detail || e.message) }]);\n    }\n  }\n\n  return (\n    <div className='flex-1'>\n      <div className='bg-white rounded-lg p-3 shadow-sm'>\n        <div className='flex gap-2'>\n          <input value={text} onChange={e=>setText(e.target.value)} placeholder=\"Say: I'm at Gate 3, take me to Hall 5\" className='flex-1 border border-slate-200 rounded-md px-3 py-2' />\n          <button onClick={()=> startListening()} className={`px-4 py-2 rounded-md ${listening ? 'bg-rose-500 text-white' : 'bg-amber-400 text-white'}`}>ðŸŽ¤</button>\n          <button onClick={()=>handleSend()} className='px-4 py-2 bg-sky-600 text-white rounded-md'>Navigate</button>\n        </div>\n\n        <div className='mt-3 space-y-1 max-h-36 overflow-auto'>\n          {history.slice().reverse().map((m,i)=>(\n            <div key={i} className={`text-sm ${m.who==='user' ? 'text-right' : 'text-left'}`}>\n              <div className={`inline-block px-3 py-1 rounded ${m.who==='user' ? 'bg-indigo-100 text-indigo-900' : 'bg-slate-100 text-slate-800'}`}>{m.text}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}